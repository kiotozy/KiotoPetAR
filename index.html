<script>
  const model = document.querySelector('#avatar');

  function playAnimation() {
    model.setAttribute('animation-mixer', '');
  }

  function stopAnimation() {
    model.removeAttribute('animation-mixer');
  }

  function playAudio(file) {
    new Audio(file).play();
  }

  document.getElementById('microphoneBtn').onclick = () => {
    if (annyang) {
      annyang.start({ autoRestart: true, continuous: false });

      const commands = {
        'olá': () => playAudio('ola.mp3'),
        'bom dia': () => playAudio('bom_dia.mp3'),
        'boa tarde': () => playAudio('boa_tarde.mp3'),
        'boa noite': () => playAudio('boa_noite.mp3'),
        'qual seu nome': () => playAudio('qual_seu_nome.mp3'),
        'quer ser meu amigo': () => playAudio('quer_ser_meu_amigo.mp3'),
        'comandos': () => playAudio('comandos.mp3'),
        'dançar': () => playAnimation(),
        'parar': () => stopAnimation()
      };

      annyang.addCommands(commands);
      alert("Comando de voz ativado!");
    } else {
      alert("Seu navegador não suporta reconhecimento de voz.");
    }
  };
</script>
